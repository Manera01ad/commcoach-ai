# CommCoach AI API Documentation

**Version:** 1.0.0  
**Base URL:** `https://commcoach-ai-production.up.railway.app/api` (Production) | `http://localhost:3001/api` (Local)

---

## üîê Authentication

Most endpoints require a Bearer Token. Include it in the `Authorization` header:

```http
Authorization: Bearer <your_access_token>
```

---

## üìö Endpoints

### 1. Authentication
**Base Path:** `/auth`

| Method | Endpoint | Description | Auth Required |
| :--- | :--- | :--- | :--- |
| `POST` | `/signup` | Create a new user account. | ‚ùå |
| `POST` | `/signin` | Login and receive an access token. | ‚ùå |
| `POST` | `/signout` | Invalidate current session. | ‚ùå |
| `GET` | `/me` | Get current user's session and profile. | ‚úÖ |

### 2. Founder's Circle (Payments)
**Base Path:** `/founders`

| Method | Endpoint | Description | Auth Required |
| :--- | :--- | :--- | :--- |
| `POST` | `/create-checkout` | Initiate Smart Checkout (Strip/Razorpay based on IP). | ‚úÖ |
| `POST` | `/verify-razorpay` | Verify Razorpay payment signature. | ‚úÖ |
| `POST` | `/verify-stripe` | Verify Stripe session status. | ‚úÖ |

### 3. Gamification (XP & Level)
**Base Path:** `/gamification`

| Method | Endpoint | Description | Auth Required |
| :--- | :--- | :--- | :--- |
| `GET` | `/progress` | Get current Level, XP, and progress to next level. | ‚úÖ |
| `POST` | `/award` | Award XP manually (Admin/Internal). | ‚úÖ |

### 4. Daily Missions
**Base Path:** `/missions`

| Method | Endpoint | Description | Auth Required |
| :--- | :--- | :--- | :--- |
| `GET` | `/today` | Fetch today's micro-drill mission. | ‚úÖ |
| `POST` | `/:id/complete` | Submit mission result (score/duration). | ‚úÖ |
| `GET` | `/stats` | Get historical completion statistics. | ‚úÖ |
| `GET` | `/history` | Get list of past missions. | ‚úÖ |

### 5. Streak Engine
**Base Path:** `/streak`

| Method | Endpoint | Description | Auth Required |
| :--- | :--- | :--- | :--- |
| `GET` | `/stats` | Get current streak, longest streak, and milestones. | ‚úÖ |
| `POST` | `/activity` | Log activity (chat/mission) to update streak. | ‚úÖ |
| `GET` | `/leaderboard` | Get Top 10 global streak leaderboard. | ‚úÖ |
| `GET` | `/inventory` | List owned items (Streak Shields, Freeze). | ‚úÖ |
| `POST` | `/shield/use` | Manually consume a Streak Shield. | ‚úÖ |

### 6. Personas
**Base Path:** `/personas`

| Method | Endpoint | Description | Auth Required |
| :--- | :--- | :--- | :--- |
| `GET` | `/` | List all available AI coach personas. | ‚úÖ |
| `GET` | `/preferred` | Get user's currently selected coach. | ‚úÖ |
| `POST` | `/preferred` | Set user's active coach persona. | ‚úÖ |

### 7. AI Agents
**Base Path:** `/agents`

| Method | Endpoint | Description | Auth Required |
| :--- | :--- | :--- | :--- |
| `POST` | `/chat` | Send message to AI Coach (streaming response). | ‚úÖ |

---

## ‚ö†Ô∏è Key Data Structures

### User Profile
```json
{
  "id": "uuid",
  "email": "user@example.com",
  "full_name": "John Doe",
  "currentXP": 1250,
  "level": 4,
  "is_founder": false
}
```

### Mission Object
```json
{
  "id": "mission_123",
  "drill": {
    "title": "Pacing Drill",
    "description": "Speak at 130wpm...",
    "xp_reward": 100,
    "difficulty": 3
  },
  "completed": false
}
```

---
*Generated by CommCoach AI Engineering Team - Jan 2026*
